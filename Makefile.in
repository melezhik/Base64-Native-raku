DIR=src
SRC=$(DIR)/%LIB_BASE%

all : lib

# 'all', with compilation warnings and debug symbols enabled
debug :
	%MAKE% "CF=-Wall -g"  all

lib : %LIB_NAME%

%LIB_NAME% : $(SRC)%O%
	%LD% %LDSHARED% %LDFLAGS% %LDOUT%%LIB_NAME% $(SRC)%O%

$(SRC)%O% : $(SRC).c $(SRC).h
	%CC% -I $(DIR) -c %CCSHARED% %CCFLAGS% %CCOUT%$(SRC)%O% $(SRC).c

test : all
	@prove6 -I . -v

clean :
	@rm $(SRC)%O%
	@rm %LIB_NAME%

realclean : clean
	@rm Makefile


